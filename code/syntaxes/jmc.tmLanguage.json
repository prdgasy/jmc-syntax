{
	"name": "jmc",
	"scopeName": "source.jmc",
	"patterns": [
		{
			"include": "#comments"
		},
		{
			"include": "#strings"
		},
		{
			"include": "#specific-decorators"
		},
		{
			"include": "#object-keys"
		},
		{
			"include": "#keywords"
		},
		{
			"include": "#classes"
		},
		{
			"include": "#functions"
		},
		{
			"include": "#variables-and-selectors"
		},
		{
			"include": "#constants"
		},
		{
			"include": "#operators"
		},
		{
			"include": "#preprocessor"
		}
	],
	"repository": {
		"comments": {
			"patterns": [
				{
					"name": "comment.line.double-slash.jmc",
					"match": "//.*$"
				},
				{
					"name": "comment.line.number-sign.jmc",
					"match": "#.*$"
				},
				{
					"name": "comment.block.jmc",
					"begin": "/\\*",
					"end": "\\*/"
				}
			]
		},
		"strings": {
			"patterns": [
				{
					"name": "string.quoted.double.multiline.jmc",
					"begin": "\"\"\"",
					"end": "\"\"\"",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				},
				{
					"name": "string.quoted.single.multiline.jmc",
					"begin": "'''",
					"end": "'''",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				},
				{
					"name": "string.quoted.template.multiline.jmc",
					"begin": "```",
					"end": "```",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				},
				{
					"name": "string.quoted.double.jmc",
					"begin": "\"",
					"end": "\"",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				},
				{
					"name": "string.quoted.single.jmc",
					"begin": "'",
					"end": "'",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				},
				{
					"name": "string.quoted.template.jmc",
					"begin": "`",
					"end": "`",
					"patterns": [
						{
							"include": "#string-interpolation"
						}
					]
				}
			]
		},
		"string-interpolation": {
			"patterns": [
				{
					"name": "constant.character.escape.jmc",
					"match": "\\\\."
				},
				{
					"name": "meta.embedded.line.jmc",
					"match": "(\\$)([a-zA-Z_][\\w.]*)",
					"captures": {
						"1": {
							"name": "punctuation.definition.variable.jmc"
						},
						"2": {
							"name": "variable.other.interpolated.jmc"
						}
					}
				},
				{
					"name": "variable.language.format.jmc",
					"match": "&<[^>]+>"
				}
			]
		},
		"specific-decorators": {
			"patterns": [
				{
					"name": "entity.name.type.class.jmc",
					"match": "@(lazy|add|root|if)\\b"
				}
			]
		},
		"object-keys": {
			"patterns": [
				{
					"name": "support.type.property-name.jmc",
					"match": "\\b([a-zA-Z_][\\w]*)(?=\\s*:)"
				}
			]
		},
		"keywords": {
			"patterns": [
				{
					"name": "keyword.control.jmc",
					"match": "\\b(if|else|for|while|return|import|with|switch|case|default|do|break|continue|try|catch|finally|throw)\\b"
				},
				{
					"name": "storage.type.jmc",
					"match": "\\b(class|function|var|let|const)\\b"
				},
				{
					"name": "keyword.operator.new.jmc",
					"match": "\\bnew\\b"
				},
				{
					"name": "support.class.builtin.jmc",
					"match": "\\b(Player|Item|Text|Math|Timer|Recipe|Hardcode|Trigger|Predicate|RightClick|Particle|Raycast|JMC|String|Object|GUI|Advancement|Scoreboard|Bossbar|Team|Entity|Array|TextProp|TextProps|Tag)\\b"
				},
				{
					"name": "support.function.builtin.mc.jmc",
					"match": "\\b(execute|run|say|tellraw|give|summon|tp|kill|setblock|fill|title|scoreboard|data|tag|team|bossbar|advancement|attribute|ban|clear|clone|damage|datapack|debug|defaultgamemode|deop|difficulty|effect|enchant|experience|fillbiome|forceload|gamemode|gamerule|help|item|kick|list|locate|loot|me|msg|op|pardon|particle|place|playsound|publish|random|recipe|reload|ride|rotate|save-all|save-off|save-on|schedule|seed|setidletimeout|setworldspawn|spawnpoint|spectate|spreadplayers|stop|stopsound|teammsg|teleport|tell|tick|time|tm|transfer|trigger|w|weather|whitelist|worldborder|xp)\\b"
				},
				{
					"name": "support.type.primitive.jmc",
					"match": "\\b(score|storage|any|string|boolean|selector|int|float|double|long|byte|short|Text|FormattedString|List|list|JSON|compound|JSObject|Objective|Criteria|Keyword|unknown)\\b"
				}
			]
		},
		"classes": {
			"patterns": [
				{
					"name": "entity.name.type.class.jmc",
					"match": "(?i)(?<=\\bclass\\s+)[a-zA-Z_][\\w]*"
				},
				{
					"name": "support.class.jmc",
					"match": "\\b([A-Z][a-zA-Z0-9_]*)(?=\\.)"
				}
			]
		},
		"functions": {
			"patterns": [
				{
					"begin": "(?i)\\b(function)\\s+",
					"beginCaptures": {
						"1": {
							"name": "storage.type.function.jmc"
						}
					},
					"end": "(?=\\s*\\()",
					"patterns": [
						{
							"name": "entity.name.function.jmc",
							"match": "[a-zA-Z_][\\w.]*"
						}
					]
				},
				{
					"name": "entity.name.function.call.jmc",
					"match": "\\b([a-zA-Z_][\\w.]*?)(?=\\s*\\()"
				},
				{
					"begin": "\\(",
					"end": "\\)",
					"patterns": [
						{
							"include": "#strings"
						},
						{
							"include": "#variables-and-selectors"
						},
						{
							"include": "#constants"
						},
						{
							"include": "#object-keys"
						}
					]
				}
			]
		},
		"variables-and-selectors": {
			"patterns": [
				{
					"name": "variable.other.scoreboard.jmc",
					"match": "\\$[a-zA-Z_][\\w.]*"
				},
				{
					"name": "variable.other.storage.jmc",
					"match": "::[a-zA-Z_][\\w.]*"
				},
				{
					"name": "variable.other.constant.jmc",
					"match": "\\$\\([a-zA-Z_][\\w]*\\)"
				},
				{
					"name": "variable.language.decorator.jmc",
					"match": "@[a-zA-Z]+"
				},
				{
					"name": "variable.language.selector.jmc",
					"match": "@[asepr](?=\\[|$|\\s|,|\\))"
				}
			]
		},
		"constants": {
			"patterns": [
				{
					"name": "constant.numeric.float.jmc",
					"match": "\\b\\d+\\.\\d+[dDfF]?\\b|\\b\\d+[dDfF]\\b"
				},
				{
					"name": "constant.numeric.integer.long.jmc",
					"match": "\\b\\d+[lL]\\b"
				},
				{
					"name": "constant.numeric.integer.short.jmc",
					"match": "\\b\\d+[sS]\\b"
				},
				{
					"name": "constant.numeric.integer.byte.jmc",
					"match": "\\b\\d+[bB]\\b"
				},
				{
					"name": "constant.numeric.integer.jmc",
					"match": "\\b\\d+\\b"
				},
				{
					"name": "constant.language.boolean.jmc",
					"match": "\\b(true|false)\\b"
				},
				{
					"name": "constant.language.null.jmc",
					"match": "\\bnull\\b"
				}
			]
		},
		"operators": {
			"patterns": [
				{
					"name": "keyword.operator.assignment.jmc",
					"match": "(:[-+\\*\\/%]?=)|(\\?\\?=)|(\\+=)|(-=)|(\\*=)|(\\/=)|(%=)|(=>)|(=)"
				},
				{
					"name": "keyword.operator.comparison.jmc",
					"match": "(==)|(!=)|(>=)|(<=)|(><)|(?<!<)<(?!<)|(?<!>)>(?!>)"
				},
				{
					"name": "keyword.operator.logical.jmc",
					"match": "(&&)|(\\|\\|)|(!)"
				},
				{
					"name": "keyword.operator.arithmetic.jmc",
					"match": "(\\+)|(-)|(\\*)|(\\/)|(%)"
				}
			]
		},
		"preprocessor": {
			"patterns": [
				{
					"match": "^\\s*(#(?:define|deepdefine|enum))\\s+([a-zA-Z_][\\w]*)",
					"captures": {
						"1": {
							"name": "keyword.control.directive.jmc"
						},
						"2": {
							"name": "variable.other.constant.jmc"
						}
					}
				},
				{
					"match": "^\\s*(#(?:bind|env|credit|include|command|del|override|uninstall|static|nometa|forcebst|show_private_command))\\b",
					"name": "keyword.control.directive.jmc"
				},
				{
					"begin": "(?<=\\w)\\(",
					"end": "\\)",
					"patterns": [
						{
							"match": "[a-zA-Z_][\\w]*",
							"name": "variable.parameter.jmc"
						},
						{
							"include": "#constants"
						}
					]
				}
			]
		}
	}
}